<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cadastrar Filme</title>
     <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<style>
        body.light {
            background-color: beige;
            color: black;
        }
        body.dark {
            background-color: rgba(105, 105, 105, 0.75);
            color:  white;
        }
        .theme-toggle {
            padding: 10px 20px;
            cursor: pointer;
        }
        .btn{
            background-color:  rgb(193, 127, 202);
        }
    </style>


</head>
<body style = "background-color: rgba(105, 105, 105, 0.75);"> 
    
   

    <nav class="navbar bg-dark border-bottom border-body" data-bs-theme="dark">
  <div class="container-fluid">
      <button type="button" class="btn-close" aria-label="Close" onclick="window.location.href='/filmes'"></button>
    <a class="navbar-brand" href="/filmes/cadastrar">Atualizar Filme</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="/filmes">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/filmes/cadastrar">Cadastrar Novo Filme</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    
    
  
<form class="row g-3" th:action="@{/filmes/{id}/update(id=${filme.id})}" th:object="${filme}" method="post" id="updateFilme">
  <div class="col-md-12">
    <label for="titulo" class="form-label">Título:</label>
    <input type="text" id="titulo" class="form-control" th:field="*{titulo}">
  </div>
  
  <div class="col-md-12">
    <label for="sinopse" class="form-label">Sinopse:</label>
    <textarea id="sinopse" class="form-control" th:field="*{sinopse}" rows="5" placeholder="Digite a sinopse aqui..."></textarea>
  </div>
  
  <div class="col-md-6">
    <label for="genero" class="form-label">Gênero:</label>
    <select id="genero" class="form-select" th:field="*{genero}">
      <option value="" selected>Selecione o gênero</option>
      <option value="Ação">Ação</option>
      <option value="Aventura">Aventura</option>
      <option value="Animação">Animação</option>
      <option value="Comédia">Comédia</option>
      <option value="Drama">Drama</option>
      <option value="Fantasia">Fantasia</option>
      <option value="Ficção Científica">Ficção Científica</option>
      <option value="Guerra">Guerra</option>
      <option value="Musical">Musical</option>
      <option value="Romance">Romance</option>
      <option value="Suspense">Suspense</option>
      <option value="Terror">Terror</option>
      <option value="Documentário">Documentário</option>
      <option value="Biografia">Biografia</option>
      <option value="Mistério">Mistério</option>
      <option value="Histórico">Histórico</option>
      <option value="Esporte">Esporte</option>
      <option value="Família">Família</option>
    </select>
  </div>

  <div class="col-md-6">
    <label for="anoLancamento" class="form-label">Ano de Lançamento:</label>
    <input type="number" id="anoLancamento" class="form-control" th:field="*{anoLancamento}" />
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-primary" id="btnAtualizar">Atualizar</button>
  </div>
</form>

<script>
  document.getElementById('btnCadastrar').addEventListener('click', function() {
    if (validarFormulario()) {
      document.getElementById('formFilme').submit();
    }
  });

  function validarFormulario() {
    // Validar Título
    const titulo = document.getElementById('titulo').value;
    if (titulo.trim() === '') {
      alert('O título não pode estar vazio.');
      return false;
    }

    // Validar Sinopse
    const sinopse = document.getElementById('sinopse').value;
    if (sinopse.trim() === '') {
      alert('A sinopse não pode estar vazia.');
      return false;
    }

    // Validar Gênero
    const genero = document.getElementById('genero').value;
    if (genero === '') {
      alert('Por favor, selecione um gênero.');
      return false;
    }

    // Validar Ano de Lançamento
    const anoLancamento = document.getElementById('anoLancamento').value;
    if (anoLancamento === '' || anoLancamento < 1895) {
      alert('O ano de lançamento não pode ser menor que 1895.');
      return false;
    }

    // Se todas as validações passarem
    return true;
  }
</script>

<script>
    // Função para obter o valor de um cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Função para alternar o tema
        function toggleTheme() {
            const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.classList.remove(currentTheme);
            document.body.classList.add(newTheme);
            setCookie('theme', newTheme, 7);  // Salva o tema no cookie com validade de 7 dias
        }

        // Função para carregar o tema do cookie quando a página for aberta
        function loadTheme() {
            const savedTheme = getCookie('theme');
            if (savedTheme) {
                document.body.classList.add(savedTheme);
            } else {
                // Se não houver cookie, aplica o tema escuro por padrão
                document.body.classList.add('dark');
            }
        }

        // Chama a função para carregar o tema quando a página é carregada
        window.onload = loadTheme;
 </script>
 
  <script src="./static.js/tema.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script th:src="@{/js/validation.js}"></script>
    

    
</body>
</html>
