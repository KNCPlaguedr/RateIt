<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Filmes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/Style.css}" /> 
    <style>
        body.light {
            background-color: beige;
            color: black;
        }
        body.dark {
            background-color: rgba(105, 105, 105, 0.75);
            color:  white;
        }
        .theme-toggle {
            padding: 10px 20px;
            cursor: pointer;
        }
        .btn{
            background-color:  rgb(193, 127, 202);
        }
    </style>
</head>
<body>
    
    
    <nav class="navbar bg-dark border-bottom border-body" data-bs-theme="dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="filmes">Rate it</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="filmes">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/filmes/cadastrar">Cadastrar Novo Filme</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    
    <p>
  
   <table class="table table-dark table-hover my-centered-table">
    <thead>
        <tr>
            <th scope="col">Filmes</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="filme : ${filmes}">
            <td>
                <a id="Filme" th:href="@{/filmes/{id}(id=${filme.id})}" th:text="${filme.titulo}"></a>
            </td>
        </tr>
    </tbody>
</table>

    <button class="btn theme-toggle" onclick="toggleTheme()">Alternar Tema</button>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script>
        // Função para salvar o tema em um cookie
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));  // Expiração em "days" dias
            document.cookie = name + "=" + value + "; expires=" + date.toUTCString() + "; path=/";
        }

        // Função para obter o valor de um cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }

        // Função para alternar o tema
        function toggleTheme() {
            const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.body.classList.remove(currentTheme);
            document.body.classList.add(newTheme);
            setCookie('theme', newTheme, 7);  // Salva o tema no cookie com validade de 7 dias
        }

        // Função para carregar o tema do cookie quando a página for aberta
        function loadTheme() {
            const savedTheme = getCookie('theme');
            if (savedTheme) {
                document.body.classList.add(savedTheme);
            } else {
                // Se não houver cookie, aplica o tema escuro por padrão
                document.body.classList.add('dark');
            }
        }

        // Chama a função para carregar o tema quando a página é carregada
        window.onload = loadTheme;
    </script>
    
    <script src="./static.js/tema.js"></script>

</body>
</html>
